<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Merch Story Dashboard ‚Äî TastefulEats</title>
  <link rel="stylesheet" href="../styles.css" />
</head>
<body class="merch-story-dashboard dark-theme">

  <header>
    <h1>üìñ Merch Story Dashboard</h1>
    <p class="tagline">Publish with feeling. Every story is a vessel. Every item is a memory.</p>
  </header>

  <section class="story-form">
    <label for="storyTitle">Story Title</label>
    <input type="text" id="storyTitle" placeholder="e.g. JOY Hoodie ‚Äî A Ritual of Softness" />

    <label for="storyImage">Upload Featured Image</label>
    <input type="file" id="storyImage" accept="image/*" />

    <label for="storyText">Full Story (2000‚Äì3000 words)</label>
    <textarea id="storyText" placeholder="Paste your emotionally fluent story here..." rows="12"></textarea>

    <label for="emotionalTags">Emotional Tags</label>
    <input type="text" id="emotionalTags" placeholder="e.g. joy, grief, ritual, memory" />

    <label for="merchName">Merch Name</label>
    <input type="text" id="merchName" placeholder="e.g. JOY Hoodie" />

    <label for="merchPrice">Price ($)</label>
    <input type="number" id="merchPrice" step="0.01" />

    <label for="merchColors">Available Colors</label>
    <input type="text" id="merchColors" placeholder="e.g. Sandstone, Midnight, Moss" />

    <label for="merchSizes">Available Sizes</label>
    <input type="text" id="merchSizes" placeholder="e.g. XS, S, M, L, XL, XXL" />

    <p class="shipping-note">üì¶ Shipping takes 9‚Äì14 business days. Each item is packed with care and memory.</p>

    <button onclick="publishMerchStory()">Publish Story</button>
  </section>

  <section id="storyLog" class="review-log">
    <h2>üóÇÔ∏è Published Merch Stories</h2>
    <!-- Stories will appear here -->
  </section>

  <footer>
    <p>&copy; 2025 TastefulEats. Storytelling is commerce. Memory is the product.</p>
  </footer>

  <script>
    function publishMerchStory() {
      const title = document.getElementById("storyTitle").value;
      const imageFile = document.getElementById("storyImage").files[0];
      const story = document.getElementById("storyText").value;
      const tags = document.getElementById("emotionalTags").value;
      const merch = document.getElementById("merchName").value;
      const price = document.getElementById("merchPrice").value;
      const colors = document.getElementById("merchColors").value;
      const sizes = document.getElementById("merchSizes").value;

      const container = document.getElementById("storyLog");
      const block = document.createElement("div");
      block.classList.add("review-block");

      const imageURL = imageFile ? URL.createObjectURL(imageFile) : "";

      block.innerHTML = `
        ${imageURL ? `<img src="${imageURL}" alt="${title}" style="max-width:100%; border-radius:8px; margin-bottom:1rem;" />` : ""}
        <h3>${title}</h3>
        <p><strong>Tags:</strong> ${tags}</p>
        <p><strong>Story:</strong><br>${story.replace(/\n/g, "<br>")}</p>
        <hr>
        <h4>üõçÔ∏è ${merch}</h4>
        <p><strong>Price:</strong> $${parseFloat(price).toFixed(2)}</p>
        <p><strong>Colors:</strong> ${colors}</p>
        <p><strong>Sizes:</strong> ${sizes}</p>
        <p class="shipping-note">üì¶ Shipping takes 9‚Äì14 business days.</p>
        <button onclick="addToCart('${merch}', ${price}, '${imageURL}')">Add to Cart</button>
      `;
      container.prepend(block);

      // Clear form
      document.getElementById("storyTitle").value = "";
      document.getElementById("storyImage").value = "";
      document.getElementById("storyText").value = "";
      document.getElementById("emotionalTags").value = "";
      document.getElementById("merchName").value = "";
      document.getElementById("merchPrice").value = "";
      document.getElementById("merchColors").value = "";
      document.getElementById("merchSizes").value = "";
    }

    function addToCart(name, price, image) {
      const product = { name, price, image };
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));
      alert(`${name} added to cart.`);
    }
  </script>
</body>
</html>